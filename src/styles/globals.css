@tailwind base;
@tailwind components;
@tailwind utilities;

/* Palette memo:
   - Primary deep ocean: rgb(57, 109, 137) / #396D89 (HSL 201 41% 38%)
   - Background washed sand: rgb(246, 243, 235) / #F6F3EB (HSL 44 38% 94%)
*/

@layer base {
  :root {
    --background: 44 40% 97%;
    /* Soft dune backdrop */
    --foreground: 202 32% 27%;
    /* Deep steel-blue text */

    --muted: 202 23% 79%;
    /* Misty blue surface */
    --muted-foreground: 201 23% 39%;
    /* Subdued slate text */

    --popover: 0 0% 100%;
    /* Neutral popovers */
    --popover-foreground: 202 32% 27%;
    /* Match body text on popovers */

    --border: 206 27% 88%;
    /* Whisper-light border */
    --input: 206 27% 88%;
    /* Inputs aligned with border tone */

    --card: 0 0% 100%;
    /* Crisp white cards */
    --card-foreground: 202 32% 27%;
    /* Steel-blue card text */

    --primary: 201 41% 38%;
    /* Deep ocean primary */
    --primary-foreground: 0 0% 100%;
    /* White text on primary */

    --secondary: 196 39% 69%;
    /* Airy blue secondary */
    --secondary-foreground: 202 32% 27%;
    /* Steel-blue secondary text */

    --accent: 202 23% 79%;
    /* Cloudy accent */
    --accent-foreground: 202 32% 27%;
    /* Steel-blue accent text */

    --destructive: 0 84% 60%;
    /* Keep vivid red for errors */
    --destructive-foreground: 210 40% 98%;
    /* Light text on destructive */

    --ring: 201 41% 38%;
    /* Ring aligned with primary */

    --radius: 0.5rem;

    --sidebar-background: 44 40% 97%;
    /* Match body background */
    --sidebar-foreground: 202 32% 27%;
    /* Steel-blue sidebar text */

    --sidebar-primary: 201 41% 38%;
    /* Deep ocean sidebar primary */
    --sidebar-primary-foreground: 0 0% 100%;
    /* White text on sidebar primary */

    --sidebar-accent: 202 23% 79%;
    /* Cloudy sidebar accent */
    --sidebar-accent-foreground: 202 32% 27%;
    /* Steel-blue accent text */

    --sidebar-border: 206 27% 88%;
    /* Subtle sidebar border */

    --sidebar-ring: 201 41% 38%;
    /* Ocean sidebar ring */

    --calendar-event-surface: 201 78% 93%;
    --calendar-event-surface-accent: 201 82% 89%;
    --calendar-event-border: 201 62% 74%;
    --calendar-event-ink: 202 56% 28%;
    --calendar-event-dot: 201 68% 50%;
    --calendar-event-chip-bg: 201 76% 91%;
    --calendar-event-chip-border: 201 60% 74%;
    --calendar-event-chip-ink: 202 54% 30%;

    --calendar-scheduled-surface: 28 92% 93%;
    --calendar-scheduled-surface-accent: 28 94% 89%;
    --calendar-scheduled-border: 28 78% 74%;
    --calendar-scheduled-ink: 22 68% 30%;
    --calendar-scheduled-dot: 26 82% 48%;
    --calendar-scheduled-chip-bg: 28 88% 90%;
    --calendar-scheduled-chip-border: 28 74% 72%;
    --calendar-scheduled-chip-ink: 24 66% 30%;

    --calendar-deadline-surface: 28 88% 92%;
    --calendar-deadline-surface-accent: 28 90% 88%;
    --calendar-deadline-border: 28 78% 74%;
    --calendar-deadline-ink: 26 64% 34%;
    --calendar-deadline-dot: 26 84% 48%;
    --calendar-deadline-chip-bg: 28 86% 90%;
    --calendar-deadline-chip-border: 28 72% 72%;
    --calendar-deadline-chip-ink: 26 64% 32%;

    --calendar-unscheduled-surface: 206 23% 96%;
    --calendar-unscheduled-surface-accent: 206 23% 92%;
    --calendar-unscheduled-border: 207 20% 84%;
    --calendar-unscheduled-ink: 208 16% 40%;
    --calendar-unscheduled-dot: 207 20% 46%;
    --calendar-unscheduled-chip-bg: 207 24% 95%;
    --calendar-unscheduled-chip-border: 207 18% 82%;
    --calendar-unscheduled-chip-ink: 208 16% 38%;

    --calendar-overdue-chip-bg: 0 84% 96%;
    --calendar-overdue-chip-border: 0 74% 78%;
    --calendar-overdue-chip-ink: 0 82% 42%;
  }

  .dark {
    --background: 198 27% 17%;
    /* Midnight blue backdrop */
    --foreground: 45 37% 89%;
    /* Light dune typography */

    --muted: 201 39% 25%;
    /* Deep tide surface */
    --muted-foreground: 202 23% 79%;
    /* Misty blue text */

    --popover: 198 27% 17%;
    /* Dark popovers */
    --popover-foreground: 45 37% 89%;
    /* Light popover text */

    --border: 201 39% 25%;
    /* Dim tide border */
    --input: 201 39% 25%;
    /* Inputs aligned with border */

    --card: 198 27% 17%;
    /* Midnight cards */
    --card-foreground: 45 37% 89%;
    /* Light card text */

    --primary: 201 36% 48%;
    /* Rich ocean highlight */
    --primary-foreground: 0 0% 100%;
    /* White text on highlight */

    --secondary: 201 36% 54%;
    /* Ocean secondary */
    --secondary-foreground: 45 37% 89%;
    /* Light text on secondary */

    --accent: 201 40% 38%;
    /* Deep surf accent */
    --accent-foreground: 45 37% 89%;
    /* Light accent text */

    --destructive: 0 63% 31%;
    /* Darkened red for destructive */
    --destructive-foreground: 45 37% 89%;
    /* Light text on destructive */

    --ring: 201 36% 48%;
    /* Highlight ring */

    --radius: 0.5rem;

    --sidebar-background: 201 39% 25%;
    /* Deep tide sidebar */
    --sidebar-foreground: 202 23% 79%;
    /* Misty sidebar text */

    --sidebar-primary: 201 36% 48%;
    /* Rich ocean sidebar highlight */
    --sidebar-primary-foreground: 0 0% 100%;
    /* White text on highlight */

    --sidebar-accent: 201 36% 54%;
    /* Ocean sidebar accent */
    --sidebar-accent-foreground: 45 37% 89%;
    /* Light accent text */

    --sidebar-border: 201 39% 25%;
    /* Dim sidebar border */

    --sidebar-ring: 201 36% 48%;
    /* Highlight sidebar ring */

    --calendar-event-surface: 201 44% 24%;
    --calendar-event-surface-accent: 201 48% 28%;
    --calendar-event-border: 201 56% 34%;
    --calendar-event-ink: 198 76% 86%;
    --calendar-event-dot: 201 64% 56%;
    --calendar-event-chip-bg: 201 42% 26%;
    --calendar-event-chip-border: 201 52% 34%;
    --calendar-event-chip-ink: 198 74% 86%;

    --calendar-scheduled-surface: 28 40% 22%;
    --calendar-scheduled-surface-accent: 28 44% 26%;
    --calendar-scheduled-border: 28 52% 32%;
    --calendar-scheduled-ink: 30 78% 85%;
    --calendar-scheduled-dot: 26 64% 52%;
    --calendar-scheduled-chip-bg: 28 38% 24%;
    --calendar-scheduled-chip-border: 28 48% 32%;
    --calendar-scheduled-chip-ink: 30 76% 86%;

    --calendar-deadline-surface: 28 52% 28%;
    --calendar-deadline-surface-accent: 28 56% 32%;
    --calendar-deadline-border: 28 64% 38%;
    --calendar-deadline-ink: 28 86% 82%;
    --calendar-deadline-dot: 16 78% 64%;
    --calendar-deadline-chip-bg: 28 48% 30%;
    --calendar-deadline-chip-border: 28 58% 40%;
    --calendar-deadline-chip-ink: 28 86% 84%;

    --calendar-unscheduled-surface: 205 22% 20%;
    --calendar-unscheduled-surface-accent: 205 24% 24%;
    --calendar-unscheduled-border: 205 28% 38%;
    --calendar-unscheduled-ink: 204 26% 82%;
    --calendar-unscheduled-dot: 204 28% 60%;
    --calendar-unscheduled-chip-bg: 205 24% 24%;
    --calendar-unscheduled-chip-border: 205 30% 42%;
    --calendar-unscheduled-chip-ink: 204 30% 84%;

    --calendar-overdue-chip-bg: 0 72% 26%;
    --calendar-overdue-chip-border: 0 78% 46%;
    --calendar-overdue-chip-ink: 15 92% 88%;
  }

  ::selection {
    color: hsl(0 0% 100%);
    background-color: hsl(201 36% 54% / 0.85);
  }

  *:focus-visible {
    @apply outline;
    @apply outline-2;
    @apply outline-offset-2;
    outline-color: hsl(var(--ring));
  }

  * {
    @apply border-border;
    @apply min-w-0;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: 'rlig' 1, 'calt' 1;
    background-color: hsl(var(--background));
    background-image: radial-gradient(120% 120% at 0% -20%, hsl(var(--primary) / 0.16), transparent 55%), radial-gradient(120% 120% at 100% 0%, hsl(var(--secondary) / 0.14), hsl(var(--background)) 65%);
    background-attachment: fixed;
  }

  html {
    @apply h-full;
  }

  body {
    @apply h-full;
  }

  html.dark body {
    background-image: radial-gradient(110% 110% at 0% -10%, hsl(var(--primary) / 0.22), transparent 55%), radial-gradient(120% 120% at 100% 0%, hsl(var(--secondary) / 0.18), hsl(var(--background)) 65%);
  }

  a {
    @apply text-muted-foreground hover:text-foreground transition-colors;
  }

  nav a {
    @apply text-muted-foreground hover:text-foreground transition-colors;
  }

  /* Target the specific mobile nav sheet */
  .mobile-nav-sheet {
    background-color: hsl(var(--sidebar-background)) !important;
    /* Use !important for testing */
  }
}

@layer components {
  .calendar-tone {
    border-width: 1px;
    border-style: solid;
    transition: background 160ms ease, border-color 160ms ease;
  }

  .calendar-tone--event {
    border-color: hsl(var(--calendar-event-border));
    background-color: hsl(var(--calendar-event-surface) / 0.92);
    background-image: linear-gradient(
      135deg,
      hsl(var(--calendar-event-surface) / 0.92),
      hsl(var(--calendar-event-surface-accent) / 0.88)
    );
    color: hsl(var(--calendar-event-ink));
  }

  .calendar-tone--scheduled {
    border-color: hsl(var(--calendar-scheduled-border));
    background-color: hsl(var(--calendar-scheduled-surface) / 0.92);
    background-image: linear-gradient(
      135deg,
      hsl(var(--calendar-scheduled-surface) / 0.92),
      hsl(var(--calendar-scheduled-surface-accent) / 0.88)
    );
    color: hsl(var(--calendar-scheduled-ink));
  }

  .calendar-tone--deadline {
    border-color: hsl(var(--calendar-deadline-border));
    background-color: hsl(var(--calendar-deadline-surface) / 0.92);
    background-image: linear-gradient(
      135deg,
      hsl(var(--calendar-deadline-surface) / 0.92),
      hsl(var(--calendar-deadline-surface-accent) / 0.88)
    );
    color: hsl(var(--calendar-deadline-ink));
  }

  .calendar-tone--unscheduled {
    border-color: hsl(var(--calendar-unscheduled-border));
    background-color: hsl(var(--calendar-unscheduled-surface) / 0.94);
    background-image: linear-gradient(
      135deg,
      hsl(var(--calendar-unscheduled-surface) / 0.94),
      hsl(var(--calendar-unscheduled-surface-accent) / 0.9)
    );
    color: hsl(var(--calendar-unscheduled-ink));
  }

  .calendar-icon {
    transition: color 160ms ease;
  }

  .calendar-icon--event {
    color: hsl(var(--calendar-event-ink));
  }

  .calendar-icon--scheduled {
    color: hsl(var(--calendar-scheduled-ink));
  }

  .calendar-icon--deadline {
    color: hsl(var(--calendar-deadline-ink));
  }

  .calendar-icon--unscheduled {
    color: hsl(var(--calendar-unscheduled-ink));
  }

  .calendar-dot {
    border-radius: 9999px;
  }

  .calendar-dot--event {
    background-color: hsl(var(--calendar-event-dot));
  }

  .calendar-dot--scheduled {
    background-color: hsl(var(--calendar-scheduled-dot));
  }

  .calendar-dot--deadline {
    background-color: hsl(var(--calendar-deadline-dot));
  }

  .calendar-dot--unscheduled {
    background-color: hsl(var(--calendar-unscheduled-dot));
  }

  .calendar-dot--overdue {
    background-color: hsl(0 84% 60%);
  }

  .calendar-chip {
    border-width: 1px;
    border-style: solid;
    background-color: hsl(var(--calendar-unscheduled-chip-bg));
    border-color: hsl(var(--calendar-unscheduled-chip-border));
    color: hsl(var(--calendar-unscheduled-chip-ink));
  }

  .calendar-chip--event {
    background-color: hsl(var(--calendar-event-chip-bg));
    border-color: hsl(var(--calendar-event-chip-border));
    color: hsl(var(--calendar-event-chip-ink));
  }

  .calendar-chip--scheduled {
    background-color: hsl(var(--calendar-scheduled-chip-bg));
    border-color: hsl(var(--calendar-scheduled-chip-border));
    color: hsl(var(--calendar-scheduled-chip-ink));
  }

  .calendar-chip--deadline {
    background-color: hsl(var(--calendar-deadline-chip-bg));
    border-color: hsl(var(--calendar-deadline-chip-border));
    color: hsl(var(--calendar-deadline-chip-ink));
  }

  .calendar-chip--unscheduled {
    background-color: hsl(var(--calendar-unscheduled-chip-bg));
    border-color: hsl(var(--calendar-unscheduled-chip-border));
    color: hsl(var(--calendar-unscheduled-chip-ink));
  }

  .calendar-chip--overdue {
    background-color: hsl(var(--calendar-overdue-chip-bg));
    border-color: hsl(var(--calendar-overdue-chip-border));
    color: hsl(var(--calendar-overdue-chip-ink));
  }
}
